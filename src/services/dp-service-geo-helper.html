<dom-module id="dp-service-geo-helper">
    <script>
        class DpServiceGeoHelper extends Polymer.Element {
            static get is() { return 'dp-service-geo-helper'; }
            static get properties() {
                return {
                    lng: String,
                    lat: String
                };
            }
            static get LongLat() {                
                const options = {
                    enableHighAccuracy: true,
                    timeout: 5000,
                    maximumAge: 0
                };

                return new Promise((resolve, reject) => {
                    if (window.navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(
                            e => { resolve(e.coords); },
                            e => { reject(e); },
                            options);
                    }
                    else {
                        reject({ message: 'browser doesn\'t support navigator.geolocation'})
                    }
                });
            }
        }

        window.customElements.define(DpServiceGeoHelper.is, DpServiceGeoHelper);
    </script>
</dom-module>
