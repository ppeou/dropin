<dom-module id="dp-profile">
    <template>
        <style include="dp-styles">
            .profile-picture {
                width: 100px;
            }
        </style>
        <div class="dp-page fixed-top">
            <dp-page-header title="My Profile"></dp-page-header>
            <div class="dp-page-content">
                <div class="layout horizontal">
                    <div class="layout vertical">
                        <div class="flex-2">
                            <img class=" img-lg" src="../../images/profile.png" />
                        </div>
                        <div class="flex-2">
                            <paper-button class="btn btn-default btn-xs btn-block btn-icon no-margin" raised>
                                <i class="md-icon">edit</i>Edit
                            </paper-button>
                        </div>
                    </div>
                    <div class="flex-12">
                        <h2>Hello [[fullName]]</h2>
                    </div>
                </div>
                <div class="layout horizontal wrap justified">
                    <div class="flex-6 input-spacer">
                        <paper-input value="{{profile.firstName}}"
                                     label="first name"></paper-input>
                    </div>
                    <div class="flex-6 input-spacer">
                        <paper-input value="{{profile.lastName}}"
                                     label="last name"></paper-input>
                    </div>
                </div>
                <div class="layout horizontal wrap justified">
                    <paper-input class="flex-6 input-spacer" value="{{profile.email}}"
                                 label="email"></paper-input>
                    <paper-input class="flex-6 input-spacer" value="{{profile.phone}}"
                                 label="phone"></paper-input>
                </div>
                <div class="layout horizontal wrap justified">
                    <paper-input class="flex-12" value="{{profile.address}}"
                                 label="address"></paper-input>
                </div>
                <div class="layout horizontal wrap justified">
                    <div class="flex-4 input-spacer">
                        <paper-input value="{{profile.city}}"
                                     label="city"></paper-input>
                    </div>
                    <div class="flex-4 input-spacer">
                        <paper-dropdown-menu label="state">
                            <paper-listbox slot="dropdown-content" attr-for-selected="id" selected="{{profile.state}}">
                                <template is="dom-repeat" items='[[stateList]]'>
                                    <paper-item id="[[item.abbr]]">[[item.abbr]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </div>
                    <div class="flex-4 input-spacer">
                        <paper-input value="{{profile.zipcode}}"
                                     label="zipcode"></paper-input>
                    </div>
                </div>
                <div class="text-right">
                    <paper-button class="btn btn-primary no-margin" raised>save</paper-button>
                </div>
            </div>
        </div>
        <dp-api-service id="DpApiService" profile="{{profile}}"></dp-api-service>
    </template>
    <script>
        class DpProfile extends Polymer.Element {
            static get is() { return 'dp-profile'; }
            static get properties() {
                return {
                    profile: Object,
                    fullName: { type: String, computed: '_fullname(profile.firstName, profile.lastName)' },
                    stateList: Array
                };
            }
            static get observers() {
                return ['_watchProfile(profile)'];
            }
            connectedCallback() {
                super.connectedCallback();
                this.$.DpApiService._getUserProfile(1);
                console.log(this.$.DpApiService._getStateList());
                this.set('stateList', this.$.DpApiService._getStateList());
            }
            _watchProfile(data) {
                console.log(data);
            }
            _fullname(fn, ln) {
                return `${fn} ${ln}`;
            }
        }

        window.customElements.define(DpProfile.is, DpProfile);
    </script>
</dom-module>
